{% extends "base.html" %}

{%- from "common/article-blocks.html" import articleBlocks -%}
{%- from "common/article-sidebar.html" import articleSidebar -%}
{%- from "components/hero/macro.html" import tnaHero -%}

{% block content %}
<article class="etna-article">
  <header class="tna-section">
    <div class="tna-container">
      <div class="tna-column tna-column--width-2-3 tna-column--width-5-6-medium tna-column--full-small tna-column--full-tiny">
        <hgroup class="tna-hgroup-xl">
          <p class="tna-hgroup__supertitle">{{ data['meta']['type'] | article_supertitle }}</p>
          <h1 class="tna-hgroup__title">{{ data['title'] }}</h1>
        </hgroup>
        {{ data['intro'] | safe }}
      </div>
    </div>
  </header>
  {% if 'hero_image_jpg' in data %}
  {{ tnaHero({
    'imageSrc': data['hero_image_jpg']['full_url'],
    'imageAlt': data['hero_image_jpg']['alt'],
    'imageWidth': data['hero_image_jpg']['width'],
    'imageHeight': data['hero_image_jpg']['height'],
    'imageCaption': data['hero_image_caption'],
    'imageSources': [
      {
        'src': data['hero_image_webp_small']['full_url'],
        'width': data['hero_image_webp_small']['width'],
        'height': data['hero_image_webp_small']['height'],
        'type': 'image/webp',
        'media': '(max-width: 48em)'
      }
    ],
    'classes': 'tna-hero--thinner'
  }) }}
  {% endif %}
  <section class="tna-section">
    <div class="tna-container">
      <div class="tna-column tna-column--width-1-4 tna-column--width-1-3-medium tna-column--full-small tna-column--full-tiny">
        {{ articleSidebar(data['body']) }}
      </div>
      <section class="tna-column tna-column--width-3-4 tna-column--width-2-3-medium tna-column--full-small tna-column--full-tiny etna-article__sections">
        {{ articleBlocks(data['body'], get_wagtail_image) }}
      </section>
    </div>
  </section>
</article>
{% endblock %}

{% block bodyEnd %}
<script src="{{ url_for('static', filename='app.min.js') }}"></script>
<script src="{{ url_for('static', filename='article.min.js') }}"></script>
{% endblock %}
