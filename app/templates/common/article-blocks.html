{% macro articleBlocks(params, get_wagtail_image) %}
  {% for block in params['blocks'] %}
  <section class="tna-section">
    <h2 class="tna-heading-l">{{ block['value']['heading'] }}</h2>
    {% for content_item in block['value']['content'] %}
      {% if content_item['type'] == 'paragraph' %}
      {{ content_item['value']['text'] | safe }}

      {% elif content_item['type'] == 'sub_heading' %}
      <h3 class="tna-heading-m">{{ block['value']['heading'] }}</h3>

      {% elif content_item['type'] == 'image' %}
      <figure class="tna-picture " data-module="tna-picture">
        <div class="tna-picture__image-wrapper">
          <picture>
            {% with image=get_wagtail_image(content_item['value']['image']) %}
            <img class="tna-picture__image" width="{{ image['width'] }}" height="{{ image['height'] }}" src="http://localhost:8000{{ image['meta']['download_url'] }}" alt="{{ content_item['value']['alt_text'] | safe }}">
            {% endwith %}
          </picture>
        </div>
        <figcaption class="tna-picture__caption">
          {{ content_item['value']['caption'] | safe }}
        </figcaption>
      </figure>

      {% elif content_item['type'] == 'quote' %}
      <blockquote class="tna-blockquote">
        <div class="tna-blockquote__quote">
          {{ content_item['value']['quote'] | safe }}
        </div>
        <p class="tna-blockquote__author">{{ content_item['value']['attribution'] }}</p>
      </blockquote>

      {% elif content_item['type'] == 'promoted_list' %}
      <h2 class="tna-heading-l">=== TODO: Promoted list ===</h2>

      {% elif content_item['type'] == 'record_links' %}
      <h2 class="tna-heading-l">=== TODO: Record links ===</h2>
      
      {% else %}
      <h1 class="tna-heading-xl">======= TODO: {{ content_item['type'] }} =======</h1>
      {% endif %}
    {% endfor %}
  </section>
  {% endfor %}
{% endmacro %}